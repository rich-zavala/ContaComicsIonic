<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Import a collection data file
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-radio-group (ionChange)="updateOption($event)">
      <ion-list-header>Choose an import mode option</ion-list-header>
      <ion-item>
        <ion-radio color="tertiary" slot="start" value="0" [checked]="option === 0" [disabled]="working"></ion-radio>
        Only add those that are not already in
      </ion-item>
      <ion-item>
        <ion-radio color="tertiary" slot="start" value="1" [checked]="option === 1" [disabled]="working"></ion-radio>
        Import records replacing duplicates
      </ion-item>
      <ion-item>
        <ion-radio color="tertiary" slot="start" value="2" [checked]="option === 2" [disabled]="working"></ion-radio>
        Clean current records and import
      </ion-item>
    </ion-radio-group>
  </ion-list>

  <div class="marginBottom20">
    <ion-button (click)="chooseFile()" color="medium" expand="block" [disabled]="working">
      Choose
      <ng-container *ngIf="!filePath"> a </ng-container>
      <ng-container *ngIf="filePath">another</ng-container>
      backup file
    </ion-button>
  </div>

  <div class="marginBottom20">
    <ion-button color="tertiary" expand="block" (click)="importData()" [disabled]="!filePath || working">
      Import data
      <ion-icon slot="end" name="download"></ion-icon>
    </ion-button>
  </div>

  <ion-text color="secondary" class="flex fcenter" *ngIf="importOutput.length > 0">{{importOutput}}</ion-text>

  <div *ngIf="working" class="flex fcol fvertical worker">
    <ion-spinner></ion-spinner>
  </div>

</ion-content>

<ion-footer slot="end" class="ion-padding">
  <ion-button size="small" color="danger" expand="block" (click)="clearRecords()">
    Clean all the database
    <ion-icon slot="end" name="nuclear"></ion-icon>
  </ion-button>
</ion-footer>